"use strict";var ct=Object.create;var Y=Object.defineProperty;var lt=Object.getOwnPropertyDescriptor;var ut=Object.getOwnPropertyNames;var ft=Object.getPrototypeOf,dt=Object.prototype.hasOwnProperty;var ht=(e,n)=>{for(var t in n)Y(e,t,{get:n[t],enumerable:!0})},ye=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of ut(n))!dt.call(e,a)&&a!==t&&Y(e,a,{get:()=>n[a],enumerable:!(r=lt(n,a))||r.enumerable});return e};var O=(e,n,t)=>(t=e!=null?ct(ft(e)):{},ye(n||!e||!e.__esModule?Y(t,"default",{value:e,enumerable:!0}):t,e)),pt=e=>ye(Y({},"__esModule",{value:!0}),e);var Bt={};ht(Bt,{default:()=>rt});module.exports=pt(Bt);var et=require("@raycast/api"),tt=require("react");var wt=require("@raycast/api");var Se=O(require("fs"));var ie=O(require("fs")),B=O(require("path"));var we=require("@raycast/api"),$e=()=>{if(!process.env.HOME)throw new Error("$HOME environment variable is not set.");return B.default.join(process.env.HOME,"Library")},mt=(e,n)=>{let{profilePath:t}=(0,we.getPreferenceValues)(),r;return t?r=B.default.join(t,e):r=B.default.join($e(),...ve,n??T,e),r};var q=()=>B.default.join($e(),...Ee),gt=e=>mt("Bookmarks",e);function ke(e){let n=[];return e.type==="folder"?e.children.forEach(t=>{n.push(...ke(t))}):e.type==="url"&&e.url&&n.push({id:e.id,url:e.url,title:e.name,lastVisited:new Date(e.date_added)}),n}var bt=e=>{let n=[];return Object.keys(e.roots).forEach(t=>{let r=e.roots[t],a=ke(r);n.push(...a)}),n},xe=async e=>{let n=gt(e);if(!ie.default.existsSync(n))throw new Error(Q);let t=await ie.default.promises.readFile(n,{encoding:"utf-8"});return bt(JSON.parse(t))};var yt=()=>{try{let e=q(),n=Se.default.readFileSync(e,"utf-8"),t=JSON.parse(n).profile.info_cache;return t?Object.keys(t)[0]:"Default"}catch{return"Default"}},ve=["Application Support","Google","Chrome"],Ee=["Application Support","Google","Chrome","Local State"],T=yt(),L="CHROME_PROFILE_KEY",Te="CHROME_PROFILES_KEY",Pe=`
  # \u{1F6A8}Error: Google Chrome browser is not installed
  ## This extension depends on Google Chrome browser. You must install it to continue.

  If you have [Homebrew](https://brew.sh/) installed then press \u23CE (Enter Key) to install Google Chrome browser.

  [Click here](https://www.google.com/chrome/) if you want to download manually.

  [![Google Chrome](https://www.google.com/chrome/static/images/chrome-logo-m100.svg)]()
`;var _e=`
# \u{1F6A8}Error: Something happened while trying to run your command

[![Google Chrome](https://www.google.com/chrome/static/images/chrome-logo-m100.svg)]()
`,X="An Error Occurred",ee="Google Chrome not installed",Q="Google Chrome has no bookmarks.";var $t=require("react/jsx-runtime");var Re=require("react"),x=require("@raycast/api"),ce=require("child_process");var Ce=require("os"),Ie=require("path"),te=require("react/jsx-runtime"),kt=(()=>{try{return(0,ce.execSync)("brew --prefix",{encoding:"utf8"}).trim()}catch{return(0,Ce.cpus)()[0].model.includes("Apple")?"/opt/homebrew":"/usr/local"}})();function Ae(){return(0,Ie.join)(kt,"bin/brew")}function xt(e){try{return(0,ce.execSync)(`${Ae()} install --cask ${e}`,{maxBuffer:10*1024*1024})}catch(n){let t=n;throw t&&t.code===127?(t.stderr=`Brew executable not found at ${Ae()}`,t):n}}function Oe(){let[e,n]=(0,Re.useState)(!0);return(0,te.jsx)(x.Detail,{actions:(0,te.jsx)(x.ActionPanel,{children:e&&(0,te.jsx)(x.Action,{title:"Install with Homebrew",onAction:async()=>{if(!e)return;let t=new x.Toast({style:x.Toast.Style.Animated,title:"Installing..."});await t.show();try{xt("google-chrome"),await t.hide()}catch{await t.hide(),await(0,x.showToast)(x.Toast.Style.Failure,X,"An unknown error occurred while trying to install")}t.title="Installed! Please go back and try again.",t.style=x.Toast.Style.Success,await t.show(),n(!1)}})}),markdown:Pe})}var V=require("@raycast/api");var Le=require("react/jsx-runtime");function Ue(){return(0,V.showToast)(V.Toast.Style.Failure,X,"Something happened while trying to run your command"),(0,Le.jsx)(V.Detail,{markdown:_e})}var d=require("@raycast/api");var De=O(require("node:process"),1),Ne=require("node:util"),le=require("node:child_process"),vt=(0,Ne.promisify)(le.execFile);async function z(e,{humanReadableOutput:n=!0,signal:t}={}){if(De.default.platform!=="darwin")throw new Error("macOS only");let r=n?[]:["-ss"],a={};t&&(a.signal=t);let{stdout:o}=await vt("osascript",["-e",e,r],a);return o.trim()}var N=require("@raycast/api");var u=O(require("react")),l=require("@raycast/api");var Me=Object.prototype.hasOwnProperty;function re(e,n){var t,r;if(e===n)return!0;if(e&&n&&(t=e.constructor)===n.constructor){if(t===Date)return e.getTime()===n.getTime();if(t===RegExp)return e.toString()===n.toString();if(t===Array){if((r=e.length)===n.length)for(;r--&&re(e[r],n[r]););return r===-1}if(!t||typeof e=="object"){r=0;for(t in e)if(Me.call(e,t)&&++r&&!Me.call(n,t)||!(t in n)||!re(e[t],n[t]))return!1;return Object.keys(n).length===r}}return e!==e&&n!==n}var D=O(require("node:fs")),ne=O(require("node:path")),je=O(require("node:crypto"));var Be=require("react/jsx-runtime");var Ge=require("node:url");function Et(e){let n=(0,u.useRef)(e),t=(0,u.useRef)(0);return re(e,n.current)||(n.current=e,t.current+=1),(0,u.useMemo)(()=>n.current,[t.current])}function E(e){let n=(0,u.useRef)(e);return n.current=e,n}function St(e,n){let t=e instanceof Error?e.message:String(e);return(0,l.showToast)({style:l.Toast.Style.Failure,title:n?.title??"Something went wrong",message:n?.message??t,primaryAction:n?.primaryAction??Fe(e),secondaryAction:n?.primaryAction?Fe(e):void 0})}var Fe=e=>{let n=!0,t="[Extension Name]...",r="";try{let s=JSON.parse((0,D.readFileSync)((0,ne.join)(l.environment.assetsPath,"..","package.json"),"utf8"));t=`[${s.title}]...`,r=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(n=!1)}catch{}let a=l.environment.isDevelopment||n,o=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?l.Clipboard.copy(o):(0,l.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(r)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${o}
\`\`\`
`)}`)}}};function ue(e,n,t){let r=(0,u.useRef)(0),[a,o]=(0,u.useState)({isLoading:!0}),s=E(e),i=E(t?.abortable),c=E(n||[]),b=E(t?.onError),h=E(t?.onData),y=E(t?.onWillExecute),w=E(t?.failureToastOptions),P=E(a.data),v=(0,u.useRef)(null),p=(0,u.useRef)({page:0}),S=(0,u.useRef)(!1),R=(0,u.useRef)(!0),J=(0,u.useRef)(50),$=(0,u.useCallback)(()=>(i.current&&(i.current.current?.abort(),i.current.current=new AbortController),++r.current),[i]),m=(0,u.useCallback)((...I)=>{let k=$();y.current?.(I),o(f=>({...f,isLoading:!0}));let F=Tt(s.current)(...I);function W(f){return f.name=="AbortError"||k===r.current&&(b.current?b.current(f):l.environment.launchType!==l.LaunchType.Background&&St(f,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(U){U.hide(),v.current?.(...c.current||[])}},...w.current}),o({error:f,isLoading:!1})),f}return typeof F=="function"?(S.current=!0,F(p.current).then(({data:f,hasMore:U,cursor:st})=>(k===r.current&&(p.current&&(p.current.cursor=st,p.current.lastItem=f?.[f.length-1]),h.current&&h.current(f,p.current),U&&(J.current=f.length),R.current=U,o(it=>p.current.page===0?{data:f,isLoading:!1}:{data:(it.data||[])?.concat(f),isLoading:!1})),f),f=>(R.current=!1,W(f)))):(S.current=!1,F.then(f=>(k===r.current&&(h.current&&h.current(f),o({data:f,isLoading:!1})),f),W))},[h,b,c,s,o,v,y,p,w,$]);v.current=m;let C=(0,u.useCallback)(()=>{p.current={page:0};let I=c.current||[];return m(...I)},[m,c]),M=(0,u.useCallback)(async(I,k)=>{let F;try{if(k?.optimisticUpdate){$(),typeof k?.rollbackOnError!="function"&&k?.rollbackOnError!==!1&&(F=structuredClone(P.current?.value));let W=k.optimisticUpdate;o(f=>({...f,data:W(f.data)}))}return await I}catch(W){if(typeof k?.rollbackOnError=="function"){let f=k.rollbackOnError;o(U=>({...U,data:f(U.data)}))}else k?.optimisticUpdate&&k?.rollbackOnError!==!1&&o(f=>({...f,data:F}));throw W}finally{k?.shouldRevalidateAfter!==!1&&(l.environment.launchType===l.LaunchType.Background||l.environment.commandMode==="menu-bar"?await C():C())}},[C,P,o,$]),Z=(0,u.useCallback)(()=>{p.current.page+=1;let I=c.current||[];m(...I)},[p,c,m]);(0,u.useEffect)(()=>{p.current={page:0},t?.execute!==!1?m(...n||[]):$()},[Et([n,t?.execute,m]),i,p]),(0,u.useEffect)(()=>()=>{$()},[$]);let nt=t?.execute!==!1?a.isLoading:!1,at={...a,isLoading:nt},ot=S.current?{pageSize:J.current,hasMore:R.current,onLoadMore:Z}:void 0;return{...at,revalidate:C,mutate:M,pagination:ot}}function Tt(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function We(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function Pt(e){return e instanceof URLSearchParams?e.toString():e}function He(e,n=[]){function t(r){return"update"in e?e.update(r,"utf8"):e.write(r)}return{dispatch:function(r){r=Pt(r),r===null?this._null():this["_"+typeof r](r)},_object:function(r){let a=/\[object (.*)\]/i,o=Object.prototype.toString.call(r),s=a.exec(o)?.[1]??"unknown:["+o+"]";s=s.toLowerCase();let i=null;if((i=n.indexOf(r))>=0){this.dispatch("[CIRCULAR:"+i+"]");return}else n.push(r);if(Buffer.isBuffer(r))return t("buffer:"),t(r.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](r);else throw new Error('Unknown object type "'+s+'"');else{let c=Object.keys(r);c=c.sort(),We(r)||c.splice(0,0,"prototype","__proto__","constructor"),t("object:"+c.length+":");let b=this;return c.forEach(function(h){b.dispatch(h),t(":"),b.dispatch(r[h]),t(",")})}},_array:function(r,a){a=typeof a<"u"?a:!1;let o=this;if(t("array:"+r.length+":"),!a||r.length<=1){r.forEach(function(c){o.dispatch(c)});return}let s=[],i=r.map(function(c){let b=_t(),h=n.slice();return He(b,h).dispatch(c),s=s.concat(h.slice(n.length)),b.read().toString()});n=n.concat(s),i.sort(),this._array(i,!1)},_date:function(r){t("date:"+r.toJSON())},_symbol:function(r){t("symbol:"+r.toString())},_error:function(r){t("error:"+r.toString())},_boolean:function(r){t("bool:"+r.toString())},_string:function(r){t("string:"+r.length+":"),t(r.toString())},_function:function(r){t("fn:"),We(r)?this.dispatch("[native]"):this.dispatch(r.toString()),this.dispatch("function-name:"+String(r.name)),this._object(r)},_number:function(r){t("number:"+r.toString())},_xml:function(r){t("xml:"+r.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(r){t("regex:"+r.toString())},_uint8array:function(r){t("uint8array:"),this.dispatch(Array.prototype.slice.call(r))},_uint8clampedarray:function(r){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(r))},_int8array:function(r){t("int8array:"),this.dispatch(Array.prototype.slice.call(r))},_uint16array:function(r){t("uint16array:"),this.dispatch(Array.prototype.slice.call(r))},_int16array:function(r){t("int16array:"),this.dispatch(Array.prototype.slice.call(r))},_uint32array:function(r){t("uint32array:"),this.dispatch(Array.prototype.slice.call(r))},_int32array:function(r){t("int32array:"),this.dispatch(Array.prototype.slice.call(r))},_float32array:function(r){t("float32array:"),this.dispatch(Array.prototype.slice.call(r))},_float64array:function(r){t("float64array:"),this.dispatch(Array.prototype.slice.call(r))},_arraybuffer:function(r){t("arraybuffer:"),this.dispatch(new Uint8Array(r))},_url:function(r){t("url:"+r.toString())},_map:function(r){t("map:");let a=Array.from(r);this._array(a,!0)},_set:function(r){t("set:");let a=Array.from(r);this._array(a,!0)},_file:function(r){t("file:"),this.dispatch([r.name,r.size,r.type,r.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(r){t("bigint:"+r.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function _t(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function At(e,n){let t=this[e];return t instanceof Date?`__raycast_cached_date__${t.toString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:n}function Rt(e,n){return typeof n=="string"&&n.startsWith("__raycast_cached_date__")?new Date(n.replace("__raycast_cached_date__","")):typeof n=="string"&&n.startsWith("__raycast_cached_buffer__")?Buffer.from(n.replace("__raycast_cached_buffer__",""),"base64"):n}function Ve(e){let n=je.default.createHash("sha1");return He(n).dispatch(e),n.digest("hex")}var Ct=Symbol("cache without namespace"),ze=new Map;function _(e,n,t){let r=t?.cacheNamespace||Ct,a=ze.get(r)||ze.set(r,new l.Cache({namespace:t?.cacheNamespace})).get(r);if(!a)throw new Error("Missing cache");let o=E(e),s=E(n),i=(0,u.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(o.current)}catch(y){console.error("Could not get Cache data:",y);return}}),c=(0,u.useMemo)(()=>{if(typeof i<"u"){if(i==="undefined")return;try{return JSON.parse(i,Rt)}catch(y){return console.warn("The cached data is corrupted",y),s.current}}else return s.current},[i,s]),b=E(c),h=(0,u.useCallback)(y=>{let w=typeof y=="function"?y(b.current):y;if(typeof w>"u")a.set(o.current,"undefined");else{let P=JSON.stringify(w,At);a.set(o.current,P)}return w},[a,o,b]);return[c,h]}var j=Symbol();function Ke(e,n,t){let{initialData:r,keepPreviousData:a,internal_cacheKeySuffix:o,...s}=t||{},i=(0,u.useRef)(null),[c,b]=_(Ve(n||[])+o,j,{cacheNamespace:Ve(e)}),h=(0,u.useRef)(c!==j?c:r),y=(0,u.useRef)(void 0),{mutate:w,revalidate:P,...v}=ue(e,n||[],{...s,onData($,m){y.current=m,s.onData&&s.onData($,m),!(m&&m.page>0)&&(i.current="promise",h.current=$,b($))}}),p,S=v.pagination;y.current&&y.current.page>0&&v.data?p=v.data:i.current==="promise"?p=h.current:a&&c!==j?(p=c,S&&(S.hasMore=!0,S.pageSize=c.length)):a&&c===j?p=h.current:c!==j?(p=c,S&&(S.hasMore=!0,S.pageSize=c.length)):p=r;let R=E(p),J=(0,u.useCallback)(async($,m)=>{let C;try{if(m?.optimisticUpdate){typeof m?.rollbackOnError!="function"&&m?.rollbackOnError!==!1&&(C=structuredClone(R.current));let M=m.optimisticUpdate(R.current);i.current="cache",h.current=M,b(M)}return await w($,{shouldRevalidateAfter:m?.shouldRevalidateAfter})}catch(M){if(typeof m?.rollbackOnError=="function"){let Z=m.rollbackOnError(R.current);i.current="cache",h.current=Z,b(Z)}else m?.optimisticUpdate&&m?.rollbackOnError!==!1&&(i.current="cache",h.current=C,b(C));throw M}},[b,w,R,h,i]);return(0,u.useEffect)(()=>{c!==j&&(i.current="cache",h.current=c)},[c]),{data:p,isLoading:v.isLoading,error:v.error,mutate:y.current&&y.current.page>0?w:J,pagination:S,revalidate:P}}function fe(e,n){let t=r=>r.startsWith("http")?r:`https://${r}`;try{let r=i=>i.startsWith("http")?i:`https://${i}`,o=(typeof e=="string"?new Ge.URL(r(e)):e).hostname;switch(process.env.FAVICON_PROVIDER??"raycast"){case"none":return{source:n?.fallback??l.Icon.Link,mask:n?.mask};case"apple":return{source:n?.fallback??l.Icon.Link,mask:n?.mask};case"duckduckgo":case"duckDuckGo":return{source:`https://icons.duckduckgo.com/ip3/${o}.ico`,fallback:n?.fallback??l.Icon.Link,mask:n?.mask};case"google":return{source:`https://www.google.com/s2/favicons?sz=${n?.size??64}&domain=${o}`,fallback:n?.fallback??l.Icon.Link,mask:n?.mask};case"legacy":case"raycast":default:return{source:`https://api.ray.so/favicon?url=${o}&size=${n?.size??64}`,fallback:n?.fallback??l.Icon.Link,mask:n?.mask}}}catch(r){return console.error(r),l.Icon.Link}}async function G({url:e,query:n,profileCurrent:t,profileOriginal:r,openTabInProfile:a}){setTimeout(()=>{(0,N.popToRoot)({clearSearchBar:!0})},3e3),await Promise.all([(0,N.closeMainWindow)({clearRootSearch:!0}),Ot()]);let o="",s=i=>`
    set profile to quoted form of "${i}"
    set link to quoted form of "${e||"about:blank"}"
    do shell script "open -na 'Google Chrome' --args --profile-directory=" & profile & " " & link
  `;switch(a){case"default":o=`
        set winExists to false
        tell application "Google Chrome"
            repeat with win in every window
                if index of win is 1 then
                    set winExists to true
                    exit repeat
                end if
            end repeat

            if not winExists then
                make new window
            else
                activate
            end if

            tell window 1
                set newTab to make new tab `+(e?`with properties {URL:"${e}"}`:n?'with properties {URL:"https://www.google.com/search?q='+n+'"}':"")+`
            end tell
        end tell
        return true

  `;break;case"profile_current":o=s(t);break;case"profile_original":o=s(r);break}return await z(o)}async function Je(e){await z(`
    tell application "Google Chrome"
      activate
      set _wnd to first window where id is ${e.windowsId}
      set index of _wnd to 1
      set active tab index of _wnd to ${e.tabIndex}
    end tell
    return true
  `)}async function Ze(e){await z(`
    tell application "Google Chrome"
      activate
      set _wnd to first window where id is ${e.windowsId}
      set index of _wnd to 1
      set active tab index of _wnd to ${e.tabIndex}
      close active tab of _wnd
    end tell
    return true
  `)}async function Ye(e){await z(`
    tell application "Google Chrome"
      activate
      set _wnd to first window where id is ${e.windowsId}
      set index of _wnd to 1
      set active tab index of _wnd to ${e.tabIndex}
      tell active tab of _wnd to reload
    end tell
    return true
  `)}var Ot=async()=>{if(await N.LocalStorage.getItem("is-installed"))return;if(await z(`
set isInstalled to false
try
    do shell script "osascript -e 'exists application \\"Google Chrome\\"'"
    set isInstalled to true
end try

return isInstalled`)==="false")throw new Error(ee);N.LocalStorage.setItem("is-installed",!0)};var g=require("react/jsx-runtime"),H=class{static NewTab=Ut;static TabList=Lt;static TabHistory=Dt};function Ut({query:e,url:n}){let{openTabInProfile:t}=(0,d.getPreferenceValues)(),[r]=_(L,T),a="Open Empty Tab";return e?a=`Search "${e}"`:n&&(a=`Open URL "${n}"`),(0,g.jsx)(d.ActionPanel,{title:"New Tab",children:(0,g.jsx)(d.Action,{onAction:()=>G({url:n,query:e,profileCurrent:r,openTabInProfile:t}),title:a})})}function Lt({tab:e,onTabClosed:n}){return(0,g.jsxs)(d.ActionPanel,{title:e.title,children:[(0,g.jsx)(Nt,{tab:e}),(0,g.jsx)(Ft,{tab:e}),(0,g.jsx)(d.Action.CopyToClipboard,{title:"Copy URL",content:e.url}),(0,g.jsx)(d.Action.CopyToClipboard,{title:"Copy Title",content:e.title,shortcut:{modifiers:["cmd","shift"],key:"enter"}}),(0,g.jsx)(Mt,{tab:e,onTabClosed:n}),(0,g.jsx)(d.ActionPanel.Section,{children:(0,g.jsx)(d.Action.CreateQuicklink,{quicklink:{link:e.url,name:e.title,application:"Google Chrome"},shortcut:{modifiers:["cmd"],key:"s"}})})]})}function Dt({title:e,url:n,profile:t}){let{openTabInProfile:r}=(0,d.getPreferenceValues)(),[a]=_(L,T);return(0,g.jsxs)(d.ActionPanel,{title:e,children:[(0,g.jsx)(d.Action,{onAction:()=>G({url:n,profileOriginal:t,profileCurrent:a,openTabInProfile:r}),title:"Open"}),(0,g.jsxs)(d.ActionPanel.Section,{title:"Open in profile",children:[(0,g.jsx)(d.Action,{onAction:()=>G({url:n,profileOriginal:t,profileCurrent:a,openTabInProfile:"profile_current"}),title:"Open in Current Profile"}),(0,g.jsx)(d.Action,{onAction:()=>G({url:n,profileOriginal:t,profileCurrent:a,openTabInProfile:"profile_original"}),title:"Open in Original Profile"})]}),(0,g.jsx)(d.Action.CopyToClipboard,{title:"Copy URL",content:n,shortcut:{modifiers:["cmd"],key:"c"}})]})}function Nt(e){async function n(){try{await Je(e.tab),await(0,d.closeMainWindow)()}catch(t){throw t instanceof Error?new Error("Issue with tab: '"+e.tab.sourceLine+`'
`+t.message):t}}return(0,g.jsx)(d.ActionPanel.Item,{title:"Open Tab",icon:{source:d.Icon.Eye},onAction:n})}function Mt(e){async function n(){await Ze(e.tab),await(0,d.closeMainWindow)(),e.onTabClosed?.()}return(0,g.jsx)(d.Action,{title:"Close Tab",icon:{source:d.Icon.XMarkCircle},onAction:n,shortcut:{modifiers:["cmd","shift"],key:"w"}})}function Ft(e){async function n(){try{await Ye(e.tab),await(0,d.closeMainWindow)()}catch(t){throw t instanceof Error?new Error("Issue with tab: '"+e.tab.sourceLine+`'
`+t.message):t}}return(0,g.jsx)(d.Action,{title:"Reload Tab",icon:{source:d.Icon.ArrowClockwise},onAction:n,shortcut:{modifiers:["cmd","shift"],key:"r"}})}var A=require("@raycast/api");var K=require("react/jsx-runtime"),ae=class{static TabList=zt;static TabHistory=Vt};function Wt(e){let n=["javascript:","data:","about:","chrome:","file:"],t=e.toLowerCase().trim();if(n.some(r=>t.startsWith(r)))return{icon:{source:A.Icon.ExclamationMark,tintColor:A.Color.Orange},isInvalid:!0};try{return new URL(e),{icon:fe(e),isInvalid:!1}}catch{return{icon:{source:A.Icon.ExclamationMark,tintColor:A.Color.Orange},isInvalid:!0}}}function Vt({profile:e,entry:{url:n,title:t,id:r},type:a}){let{icon:o,isInvalid:s}=Wt(n);return(0,K.jsx)(A.List.Item,{id:`${e}-${a}-${r}`,title:t,subtitle:n,icon:o,accessories:s?[{text:"\u26A0\uFE0F Invalid URL - Cannot open",tooltip:"This URL uses an unsupported protocol"}]:void 0,actions:(0,K.jsx)(H.TabHistory,{title:t,url:n,profile:e})})}function zt(e){return(0,K.jsx)(A.List.Item,{title:e.tab.title,subtitle:e.tab.urlWithoutScheme(),keywords:[e.tab.urlWithoutScheme()],actions:(0,K.jsx)(H.TabList,{tab:e.tab,onTabClosed:e.onTabClosed}),icon:e.useOriginalFavicon?e.tab.realFavicon():e.tab.googleFavicon()})}var de=require("react");function qe(e){if(!e)return{includeTerms:[],excludeTerms:[]};let n=e.trim().split(/\s+/),t=[],r=[];for(let a of n)a.startsWith("\\-")&&a.length>1?t.push(a.slice(1).toLowerCase()):a.startsWith("-")&&a.length>1?r.push(a.slice(1).toLowerCase()):a.length>0&&a!=="-"&&t.push(a.toLowerCase());return{includeTerms:t,excludeTerms:r}}function Qe(e,n){let{includeTerms:t,excludeTerms:r}=n,a=t.length===0||t.every(s=>e.includes(s)),o=r.length===0||!r.some(s=>e.includes(s));return a&&o}var he=require("react/jsx-runtime");function Xe(e,n){let[t,r]=(0,de.useState)(!1),[a,o]=(0,de.useState)(),{isLoading:s,data:i,revalidate:c}=ue(async(h,y)=>{let w=await xe(h);o(void 0),r(w.length===0);let P=qe(y||"");return P.includeTerms.length===0&&P.excludeTerms.length===0?w:w.filter(v=>{let p=`${v.title.toLowerCase()} ${v.url.toLowerCase()}`;return Qe(p,P)})},[e,n],{onError(h){h.message===ee?o((0,he.jsx)(Oe,{})):h.message===Q?r(!0):o((0,he.jsx)(Ue,{}))}});return{errorView:a,isLoading:s,data:t?[]:i||[],revalidate:c}}var pe=require("@raycast/api"),me=require("react");var oe=require("fs");var ge=require("react/jsx-runtime");async function jt(){let e=q();if(!(0,oe.existsSync)(e))return[{name:"Default",id:"Default"}];let n=await oe.promises.readFile(e,"utf-8"),t=JSON.parse(n).profile.info_cache;return Object.entries(t).map(([r,a])=>({name:a.name,id:r}))}function be({onProfileSelected:e}){let[n,t]=_(L,T),[r,a]=_(Te,[{name:"Person 1",id:T}]),{data:o}=Ke(jt);return(0,me.useEffect)(()=>{o&&(a(o),n||(o.length>0?t(o[0].id):t(T)))},[o]),(0,me.useEffect)(()=>{n&&e?.(n)},[n]),!r||r.length<2?null:(0,ge.jsx)(pe.List.Dropdown,{tooltip:"Select Chrome Profile",value:n,onChange:t,children:r.map(s=>(0,ge.jsx)(pe.List.Dropdown.Item,{value:s.id,title:s.name},s.id))})}var se=require("react/jsx-runtime");function rt(){let[e,n]=(0,tt.useState)(),[t]=_(L,T),{data:r,isLoading:a,errorView:o,revalidate:s}=Xe(t,e);return o||(0,se.jsx)(et.List,{onSearchTextChange:n,isLoading:a,throttle:!0,searchBarAccessory:(0,se.jsx)(be,{onProfileSelected:s}),children:r?.map(i=>(0,se.jsx)(ae.TabHistory,{entry:i,profile:t,type:"Bookmark"},i.id))})}
